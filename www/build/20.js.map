{"version":3,"sources":["../../src/pages/map/map.module.ts","../../src/pages/map/map.ts"],"names":[],"mappings":"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","file":"20.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { MapPage } from './map';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MapPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MapPage),\r\n    TranslateModule.forChild()\r\n  ],\r\n  exports: [\r\n    MapPage\r\n  ]\r\n})\r\nexport class ListMasterPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map/map.module.ts","import { Component, NgZone } from '@angular/core';\r\nimport { IonicPage, ModalController, NavController, AlertController, AlertOptions } from 'ionic-angular';\r\nimport { FirebaseProviderServiceProvider } from '../../providers/firebase-provider-service/firebase-provider-service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { Item } from '../../models/item';\r\nimport { Items } from '../../providers';\r\nimport { WelcomePage } from '../welcome/welcome';\r\nimport { LocationProvider } from '../../providers/location/location';\r\nimport { AutocompleteComponent } from '../../components/autocomplete/autocomplete';\r\ndeclare var google;\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-map',\r\n  templateUrl: 'map.html'\r\n})\r\nexport class MapPage {\r\n\r\n\r\n  map: any;\r\n  currentItems: Item[];\r\n  showMap = false;\r\n  address;\r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public items: Items, \r\n    public modalCtrl: ModalController,\r\n    public translateService: TranslateService,\r\n    public authProvider: FirebaseProviderServiceProvider,\r\n    private locationProvider: LocationProvider,\r\n    private zone: NgZone) {\r\n    this.currentItems = this.items.query();\r\n    this.address = {\r\n      place: ''\r\n    };\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.getMyLocation();\r\n  }\r\n\r\n  getLocations() {\r\n    return [\r\n      ['Ecodigital - Descarte Já ', -8.065399, -34.890843, 1],\r\n      ['Vincents Reciclagem Ltda', -8.071543, -34.910586, 2],\r\n      ['RECICLETOOL', -8.060173, -34.920741, 3],\r\n      ['CERCAP - Centro Brasileiro de Reciclagem e Capacitação Profissional', -8.051482, -34.902369, 4]\r\n    ]\r\n  }\r\n\r\n  getMyLocation() {\r\n   this.locationProvider.getLocation()\r\n     .then(data => {\r\n       if(data){\r\n         this.initMap(data['latitude'],data['longitude'])\r\n         this.showMap = true\r\n       }\r\n    }).catch(err => {\r\n      this.initMap(-8.0605512,-34.872537)\r\n      this.showMap = true;\r\n      console.error(err)\r\n    })\r\n  }\r\n\r\n  showAddressModal () {\r\n    let modal = this.modalCtrl.create(AutocompleteComponent);\r\n    let me = this;\r\n    modal.onDidDismiss(data => {\r\n      this.address.place = data;\r\n    });\r\n    modal.present();\r\n  }\r\n\r\n  initMap(latitude: Number, longitude: Number) {\r\n    const locations = this.getLocations();\r\n    const myLocation = {lat: latitude, lng: longitude}\r\n    \r\n\r\n    console.info('My location', myLocation)\r\n\r\n    \r\n    let map = new google.maps.Map(document.getElementById('map'), {\r\n      zoom: 13,\r\n      center: myLocation,\r\n      myLocationButton: true,\r\n      mapToolbar: false,  \r\n      indoorPicker: false,\r\n      compass: false,\r\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n    });\r\n\r\n    let infowindow = new google.maps.InfoWindow;\r\n\r\n    let marker, i;\r\n\r\n    // map.addListener('click', e => this.getPositionClick(e.latLng, map))\r\n\r\n    for (i = 0; i < locations.length; i++) {\r\n      marker = new google.maps.Marker({\r\n        position: new google.maps.LatLng(locations[i][1], locations[i][2]),\r\n        map: map,\r\n        animation: 'DROP'\r\n      });\r\n\r\n      google.maps.event.addListener(marker, 'click', ((marker, i) => {\r\n        return function () {\r\n          infowindow.setContent(locations[i][0]);\r\n          infowindow.open(map, marker);\r\n        }\r\n      })(marker, i));\r\n    }\r\n  }\r\n\r\n  // showAlert(pos, map) {\r\n\r\n  //   const inputs: AlertInputOptions[]= [{\r\n  //     type: 'text',\r\n  //     name: 'Nome do ponto de coleta',\r\n  //   }]\r\n\r\n  //   const buttons: AlertButton[] = [\r\n  //     {\r\n  //       text: 'Salvar',\r\n  //       handler: () => this.saveColletPoint(pos, map)\r\n  //     },\r\n  //     {\r\n  //       text: 'Cancel'\r\n  //     }\r\n  //   ]\r\n\r\n  //   const options: AlertOptions = {\r\n  //     title: 'Ponto de Coleta',\r\n  //     subTitle: 'Deseja salvar este ponto de coleta?',\r\n  //     inputs: inputs,\r\n  //     buttons: buttons\r\n  //   }\r\n\r\n  //   const alert = this.alertCtrl.create(options)\r\n  //   alert.present();\r\n    \r\n  // }\r\n\r\n  // saveColletPoint(pos, map) {\r\n    \r\n  //   this.setNewMarker(pos, map)\r\n  // }\r\n\r\n  // setNewMarker(position, map) {\r\n  //   new google.maps.Marker({\r\n  //     position,\r\n  //     map,\r\n  //     animation: 'DROP'\r\n  //   })\r\n\r\n  //   map.panTo(position);\r\n  // }\r\n\r\n  // getPositionClick(e, map) {\r\n\r\n  //   const pos = {lat: e.lat(), lng: e.lng()}\r\n\r\n  //   this.showAlert(pos, map);\r\n  // }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map/map.ts"],"sourceRoot":""}