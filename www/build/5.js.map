{"version":3,"sources":["../../src/pages/map/map.module.ts","../../src/pages/map/map.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { MapPage } from './map';\n\n@NgModule({\n  declarations: [\n    MapPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MapPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    MapPage\n  ]\n})\nexport class ListMasterPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map/map.module.ts","import { Component, NgZone } from '@angular/core';\nimport { IonicPage, ModalController, NavController, AlertController, AlertOptions } from 'ionic-angular';\nimport { FirebaseProviderServiceProvider } from '../../providers/firebase-provider-service/firebase-provider-service';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { Item } from '../../models/item';\nimport { Items } from '../../providers';\nimport { WelcomePage } from '../welcome/welcome';\nimport { LocationProvider } from '../../providers/location/location';\nimport { AutocompleteComponent } from '../../components/autocomplete/autocomplete';\ndeclare var google;\n\n@IonicPage()\n@Component({\n  selector: 'page-map',\n  templateUrl: 'map.html'\n})\nexport class MapPage {\n\n\n  map: any;\n  currentItems: Item[];\n  showMap = false;\n  address;\n\n  constructor(\n    public navCtrl: NavController, \n    public items: Items, \n    public modalCtrl: ModalController,\n    public translateService: TranslateService,\n    public authProvider: FirebaseProviderServiceProvider,\n    private locationProvider: LocationProvider,\n    private zone: NgZone) {\n    this.currentItems = this.items.query();\n    this.address = {\n      place: ''\n    };\n  }\n\n  ionViewDidLoad() {\n    this.getMyLocation();\n  }\n\n  getLocations() {\n    return [\n      ['Ecodigital - Descarte Já ', -8.065399, -34.890843, 1],\n      ['Vincents Reciclagem Ltda', -8.071543, -34.910586, 2],\n      ['RECICLETOOL', -8.060173, -34.920741, 3],\n      ['CERCAP - Centro Brasileiro de Reciclagem e Capacitação Profissional', -8.051482, -34.902369, 4]\n    ]\n  }\n\n  getMyLocation() {\n   this.locationProvider.getLocation()\n     .then(data => {\n       if(data){\n         this.initMap(data['latitude'],data['longitude'])\n         this.showMap = true\n       }\n    }).catch(err => {\n      this.initMap(-8.0605512,-34.872537)\n      this.showMap = true;\n      console.error(err)\n    })\n  }\n\n  showAddressModal () {\n    let modal = this.modalCtrl.create(AutocompleteComponent);\n    let me = this;\n    modal.onDidDismiss(data => {\n      this.address.place = data;\n    });\n    modal.present();\n  }\n\n  initMap(latitude: Number, longitude: Number) {\n    const locations = this.getLocations();\n    const myLocation = {lat: latitude, lng: longitude}\n    \n\n    console.info('My location', myLocation)\n\n    \n    let map = new google.maps.Map(document.getElementById('map'), {\n      zoom: 13,\n      center: myLocation,\n      myLocationButton: true,\n      mapToolbar: false,  \n      indoorPicker: false,\n      compass: false,\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\n    });\n\n    let infowindow = new google.maps.InfoWindow;\n\n    let marker, i;\n\n    // map.addListener('click', e => this.getPositionClick(e.latLng, map))\n\n    for (i = 0; i < locations.length; i++) {\n      marker = new google.maps.Marker({\n        position: new google.maps.LatLng(locations[i][1], locations[i][2]),\n        map: map,\n        animation: 'DROP'\n      });\n\n      google.maps.event.addListener(marker, 'click', ((marker, i) => {\n        return function () {\n          infowindow.setContent(locations[i][0]);\n          infowindow.open(map, marker);\n        }\n      })(marker, i));\n    }\n  }\n\n  // showAlert(pos, map) {\n\n  //   const inputs: AlertInputOptions[]= [{\n  //     type: 'text',\n  //     name: 'Nome do ponto de coleta',\n  //   }]\n\n  //   const buttons: AlertButton[] = [\n  //     {\n  //       text: 'Salvar',\n  //       handler: () => this.saveColletPoint(pos, map)\n  //     },\n  //     {\n  //       text: 'Cancel'\n  //     }\n  //   ]\n\n  //   const options: AlertOptions = {\n  //     title: 'Ponto de Coleta',\n  //     subTitle: 'Deseja salvar este ponto de coleta?',\n  //     inputs: inputs,\n  //     buttons: buttons\n  //   }\n\n  //   const alert = this.alertCtrl.create(options)\n  //   alert.present();\n    \n  // }\n\n  // saveColletPoint(pos, map) {\n    \n  //   this.setNewMarker(pos, map)\n  // }\n\n  // setNewMarker(position, map) {\n  //   new google.maps.Marker({\n  //     position,\n  //     map,\n  //     animation: 'DROP'\n  //   })\n\n  //   map.panTo(position);\n  // }\n\n  // getPositionClick(e, map) {\n\n  //   const pos = {lat: e.lat(), lng: e.lng()}\n\n  //   this.showAlert(pos, map);\n  // }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map/map.ts"],"sourceRoot":""}